{"remainingRequest":"/Users/upyou/Desktop/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/upyou/Desktop/blog-view/src/components/slider-conponent.vue?vue&type=style&index=0&id=7b8e2962&scoped=true&lang=scss&","dependencies":[{"path":"/Users/upyou/Desktop/blog-view/src/components/slider-conponent.vue","mtime":1586589902061},{"path":"/Users/upyou/Desktop/blog-view/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKQGltcG9ydCAiLi4vc3R5bGUuc2NzcyI7Cgouc2xpZGVyIHsKICB3aWR0aDogMTAwJTsKICBoZWlnaHQ6IDEwcHg7CiAgYm94LXNpemluZzogYm9yZGVyLWJveDsKICBkaXNwbGF5OiBmbGV4OwogIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDsKICBhbGlnbi1pdGVtczogY2VudGVyOwogIHBvc2l0aW9uOiByZWxhdGl2ZTsKCiAgLnByb2dyZXNzIHsKICAgIGJvcmRlci1yYWRpdXM6IDZweDsKICAgIGJhY2tncm91bmQ6ICRzbGlkZXItYmFja2dyb3VuZDsKICAgIGhlaWdodDogNnB4OwogICAgd2lkdGg6IDEwMCU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwoKICAgIC5nbyB7CiAgICAgIHdpZHRoOiAwcHg7CiAgICAgIGJhY2tncm91bmQ6ICRzbGlkZXItYmFja2dyb3VuZC1wcm9ncmVzczsKICAgICAgaGVpZ2h0OiBpbmhlcml0OwogICAgfQogIH0KCiAgLkpveXN0aWNrIHsKICAgIGhlaWdodDogMTBweDsKICAgIHdpZHRoOiAxMHB4OwogICAgYm9yZGVyLXJhZGl1czogNTAlOwogICAgYmFja2dyb3VuZDogIzE4OTBmZjsKICAgIGxlZnQ6IDBweDsKICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTsKICAgIGN1cnNvcjogcG9pbnRlcjsKICAgIHRyYW5zaXRpb246IGhlaWdodCAwLjJzLCB3aWR0aCAwLjJzOwogICAgLy8gdHJhbnNmb3JtOiB0cmFuc2xhdGVYKC01MCUpOwoKICAgICY6aG92ZXIgewogICAgICBoZWlnaHQ6IDEycHg7CiAgICAgIHdpZHRoOiAxMnB4OwogICAgfQogIH0KfQo="},{"version":3,"sources":["slider-conponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6IA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"slider-conponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"slider\" :data-value=\"val\" :progress=\"tweenedNumber\">\n    <div class=\"progress\" @click.stop=\"JoystickClick\">\n      <div class=\"go\" :style=\"{width:  `calc(${tweenedNumber}% - 5px)`}\"></div>\n    </div>\n    <div\n      class=\"Joystick\"\n      v-drag:tweenedNumber=\"setData\"\n      :style=\"{left: `calc(${tweenedNumber}% - 5px)`}\"\n    ></div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { Vue, Prop, Component, Emit, Watch } from \"vue-property-decorator\";\nimport { gsap } from \"gsap\";\n\nlet s = false;\n@Component({\n  directives: {\n    drag: {\n      inserted: function(el: HTMLElement, binding) {\n        const odiv: HTMLElement = el; //获取当前元素\n        let debounceTime: number | undefined;\n        let sendEmitValue: number | undefined;\n        let actualLeft = el.offsetLeft;\n        let current: any = el.offsetParent;\n\n        while (current !== null) {\n          actualLeft += current.offsetLeft;\n          current = current.offsetParent;\n        }\n        // 使用防抖是为了不过多的发送，节约资源： 发送@Emit\n        function sendEmit(x: any) {\n          if (sendEmitValue) clearTimeout(sendEmitValue);\n          sendEmitValue = setTimeout(() => {\n            binding.value(\"sliderChange\", x);\n          }, 60);\n        }\n\n        odiv.onmousedown = (de: MouseEvent) => {\n          s = true;\n          const screenX: number = de.clientX;\n          document.onmousemove = (me: MouseEvent) => {\n            if (!s) return;\n            //防抖\n            if (debounceTime) clearTimeout(debounceTime);\n            debounceTime = setTimeout(() => {\n              if (!s) return;\n              const mex = me.offsetX;\n              const pnw: any = el.parentNode;\n              const x =\n                (me.clientX - actualLeft - (de as any).layerX) /\n                (pnw.offsetWidth / 100);\n              // console.log(x)\n\n              if (x >= 100) {\n                binding.value(binding.arg, \"100\");\n                sendEmit(100);\n              } else if (x <= 0) {\n                binding.value(binding.arg, 0);\n                sendEmit(0);\n              } else {\n                binding.value(binding.arg, x);\n                sendEmit(x);\n              }\n            }, 5);\n          };\n        };\n        document.onmouseup = e => {\n          s = false;\n        };\n      }\n    }\n  }\n})\nexport default class Yslider extends Vue {\n  @Prop({\n    default: 0,\n    type: String || Number,\n    required: false\n  })\n  private go?: string | number;\n  mounted() {\n    if (this.go) {\n      if (this.go > 100) {\n        this.val = 100;\n      } else if (this.go < 0) {\n        this.val = 0;\n      } else {\n        this.val = this.go;\n      }\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  @Emit(\"sliderChange\") private sliderChange(number: number) {}\n  @Watch(\"val\")\n  private setVal(nv: any, ov: any) {\n    gsap.to(this.$data, { duration: 0.5, tweenedNumber: nv });\n    this.sliderChange(nv);\n  }\n\n  private val?: string | number = 0;\n  private MouseDiwn: boolean | undefined = false;\n  private tweenedNumber?: string | number = 0;\n  // private progress?: number | undefined = this.go;\n\n  private JoystickClick(event: MouseEvent) {\n    // const percentage = (event.target as any).offsetWidth / 100;\n    const x = event.offsetX;\n\n    this.val = this.toPercentage(x, (event.currentTarget as any).offsetWidth);\n  }\n  private getType(d: any) {\n    return Object.prototype.toString.call(d);\n  }\n  private setData(key: string[] | string, value: any) {\n    if (this.getType(key) === \"[object Array]\") {\n      (key as []).forEach(item => {\n        if (typeof (this as any)[item] === \"function\") {\n          (this as any)[item](value);\n        } else {\n          (this as any)[item] = value;\n        }\n      });\n    } else {\n      const item: string = key.toString();\n      if (typeof (this as any)[item] === \"function\") {\n        (this as any)[item](value);\n      } else {\n        (this as any)[item] = value;\n      }\n    }\n  }\n  // 计算val在max中的占比。\n  private toPercentage(val: any, max: any) {\n    return val / (max / 100);\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../style.scss\";\n\n.slider {\n  width: 100%;\n  height: 10px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  position: relative;\n\n  .progress {\n    border-radius: 6px;\n    background: $slider-background;\n    height: 6px;\n    width: 100%;\n    overflow: hidden;\n\n    .go {\n      width: 0px;\n      background: $slider-background-progress;\n      height: inherit;\n    }\n  }\n\n  .Joystick {\n    height: 10px;\n    width: 10px;\n    border-radius: 50%;\n    background: #1890ff;\n    left: 0px;\n    position: absolute;\n    cursor: pointer;\n    transition: height 0.2s, width 0.2s;\n    // transform: translateX(-50%);\n\n    &:hover {\n      height: 12px;\n      width: 12px;\n    }\n  }\n}\n</style>"]}]}