{"remainingRequest":"/Users/upyou/Desktop/blog-view/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/upyou/Desktop/blog-view/src/components/slider-conponent.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/upyou/Desktop/blog-view/src/components/slider-conponent.vue","mtime":1586589881644},{"path":"/Users/upyou/Desktop/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/upyou/Desktop/blog-view/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCmltcG9ydCB7IFZ1ZSwgUHJvcCwgQ29tcG9uZW50LCBFbWl0LCBXYXRjaCB9IGZyb20gInZ1ZS1wcm9wZXJ0eS1kZWNvcmF0b3IiOwppbXBvcnQgeyBnc2FwIH0gZnJvbSAiZ3NhcCI7CgpsZXQgcyA9IGZhbHNlOwpAQ29tcG9uZW50KHsKICBkaXJlY3RpdmVzOiB7CiAgICBkcmFnOiB7CiAgICAgIGluc2VydGVkOiBmdW5jdGlvbihlbDogSFRNTEVsZW1lbnQsIGJpbmRpbmcpIHsKICAgICAgICBjb25zdCBvZGl2OiBIVE1MRWxlbWVudCA9IGVsOyAvL+iOt+WPluW9k+WJjeWFg+e0oAogICAgICAgIGxldCBkZWJvdW5jZVRpbWU6IG51bWJlciB8IHVuZGVmaW5lZDsKICAgICAgICBsZXQgc2VuZEVtaXRWYWx1ZTogbnVtYmVyIHwgdW5kZWZpbmVkOwogICAgICAgIGxldCBhY3R1YWxMZWZ0ID0gZWwub2Zmc2V0TGVmdDsKICAgICAgICBsZXQgY3VycmVudDogYW55ID0gZWwub2Zmc2V0UGFyZW50OwoKICAgICAgICB3aGlsZSAoY3VycmVudCAhPT0gbnVsbCkgewogICAgICAgICAgYWN0dWFsTGVmdCArPSBjdXJyZW50Lm9mZnNldExlZnQ7CiAgICAgICAgICBjdXJyZW50ID0gY3VycmVudC5vZmZzZXRQYXJlbnQ7CiAgICAgICAgfQogICAgICAgIC8vIOS9v+eUqOmYsuaKluaYr+S4uuS6huS4jei/h+WkmueahOWPkemAge+8jOiKgue6pui1hOa6kO+8miDlj5HpgIFARW1pdAogICAgICAgIGZ1bmN0aW9uIHNlbmRFbWl0KHg6IGFueSkgewogICAgICAgICAgaWYgKHNlbmRFbWl0VmFsdWUpIGNsZWFyVGltZW91dChzZW5kRW1pdFZhbHVlKTsKICAgICAgICAgIHNlbmRFbWl0VmFsdWUgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICAgICAgYmluZGluZy52YWx1ZSgic2xpZGVyQ2hhbmdlIiwgeCk7CiAgICAgICAgICB9LCA2MCk7CiAgICAgICAgfQoKICAgICAgICBvZGl2Lm9ubW91c2Vkb3duID0gKGRlOiBNb3VzZUV2ZW50KSA9PiB7CiAgICAgICAgICBzID0gdHJ1ZTsKICAgICAgICAgIGNvbnN0IHNjcmVlblg6IG51bWJlciA9IGRlLmNsaWVudFg7CiAgICAgICAgICBkb2N1bWVudC5vbm1vdXNlbW92ZSA9IChtZTogTW91c2VFdmVudCkgPT4gewogICAgICAgICAgICBpZiAoIXMpIHJldHVybjsKICAgICAgICAgICAgLy/pmLLmipYKICAgICAgICAgICAgaWYgKGRlYm91bmNlVGltZSkgY2xlYXJUaW1lb3V0KGRlYm91bmNlVGltZSk7CiAgICAgICAgICAgIGRlYm91bmNlVGltZSA9IHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgIGlmICghcykgcmV0dXJuOwogICAgICAgICAgICAgIGNvbnN0IG1leCA9IG1lLm9mZnNldFg7CiAgICAgICAgICAgICAgY29uc3QgcG53OiBhbnkgPSBlbC5wYXJlbnROb2RlOwogICAgICAgICAgICAgIGNvbnN0IHggPQogICAgICAgICAgICAgICAgKG1lLmNsaWVudFggLSBhY3R1YWxMZWZ0IC0gKGRlIGFzIGFueSkubGF5ZXJYKSAvCiAgICAgICAgICAgICAgICAocG53Lm9mZnNldFdpZHRoIC8gMTAwKTsKICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh4KQoKICAgICAgICAgICAgICBpZiAoeCA+PSAxMDApIHsKICAgICAgICAgICAgICAgIGJpbmRpbmcudmFsdWUoYmluZGluZy5hcmcsICIxMDAiKTsKICAgICAgICAgICAgICAgIHNlbmRFbWl0KDEwMCk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmICh4IDw9IDApIHsKICAgICAgICAgICAgICAgIGJpbmRpbmcudmFsdWUoYmluZGluZy5hcmcsIDApOwogICAgICAgICAgICAgICAgc2VuZEVtaXQoMCk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGJpbmRpbmcudmFsdWUoYmluZGluZy5hcmcsIHgpOwogICAgICAgICAgICAgICAgc2VuZEVtaXQoeCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCA1KTsKICAgICAgICAgIH07CiAgICAgICAgfTsKICAgICAgICBkb2N1bWVudC5vbm1vdXNldXAgPSBlID0+IHsKICAgICAgICAgIHMgPSBmYWxzZTsKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfQp9KQpleHBvcnQgZGVmYXVsdCBjbGFzcyBZc2xpZGVyIGV4dGVuZHMgVnVlIHsKICBAUHJvcCh7CiAgICBkZWZhdWx0OiAwLAogICAgdHlwZTogU3RyaW5nIHx8IE51bWJlciwKICAgIHJlcXVpcmVkOiBmYWxzZQogIH0pCiAgcHJpdmF0ZSBnbz86IHN0cmluZyB8IG51bWJlcjsKICBtb3VudGVkKCkgewogICAgaWYgKHRoaXMuZ28pIHsKICAgICAgaWYgKHRoaXMuZ28gPiAxMDApIHsKICAgICAgICB0aGlzLnZhbCA9IDEwMDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmdvIDwgMCkgewogICAgICAgIHRoaXMudmFsID0gMDsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnZhbCA9IHRoaXMuZ287CiAgICAgIH0KICAgIH0KICB9CiAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1lbXB0eS1mdW5jdGlvbgogIEBFbWl0KCJzbGlkZXJDaGFuZ2UiKSBwcml2YXRlIHNsaWRlckNoYW5nZShudW1iZXI6IG51bWJlcikge30KICBAV2F0Y2goInZhbCIpCiAgcHJpdmF0ZSBzZXRWYWwobnY6IGFueSwgb3Y6IGFueSkgewogICAgZ3NhcC50byh0aGlzLiRkYXRhLCB7IGR1cmF0aW9uOiAwLjUsIHR3ZWVuZWROdW1iZXI6IG52IH0pOwogICAgdGhpcy5zbGlkZXJDaGFuZ2UobnYpOwogIH0KCiAgcHJpdmF0ZSB2YWw/OiBzdHJpbmcgfCBudW1iZXIgPSAwOwogIHByaXZhdGUgTW91c2VEaXduOiBib29sZWFuIHwgdW5kZWZpbmVkID0gZmFsc2U7CiAgcHJpdmF0ZSB0d2VlbmVkTnVtYmVyPzogc3RyaW5nIHwgbnVtYmVyID0gMDsKICAvLyBwcml2YXRlIHByb2dyZXNzPzogbnVtYmVyIHwgdW5kZWZpbmVkID0gdGhpcy5nbzsKCiAgcHJpdmF0ZSBKb3lzdGlja0NsaWNrKGV2ZW50OiBNb3VzZUV2ZW50KSB7CiAgICAvLyBjb25zdCBwZXJjZW50YWdlID0gKGV2ZW50LnRhcmdldCBhcyBhbnkpLm9mZnNldFdpZHRoIC8gMTAwOwogICAgY29uc3QgeCA9IGV2ZW50Lm9mZnNldFg7CgogICAgdGhpcy52YWwgPSB0aGlzLnRvUGVyY2VudGFnZSh4LCAoZXZlbnQuY3VycmVudFRhcmdldCBhcyBhbnkpLm9mZnNldFdpZHRoKTsKICB9CiAgcHJpdmF0ZSBnZXRUeXBlKGQ6IGFueSkgewogICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChkKTsKICB9CiAgcHJpdmF0ZSBzZXREYXRhKGtleTogc3RyaW5nW10gfCBzdHJpbmcsIHZhbHVlOiBhbnkpIHsKICAgIGlmICh0aGlzLmdldFR5cGUoa2V5KSA9PT0gIltvYmplY3QgQXJyYXldIikgewogICAgICAoa2V5IGFzIFtdKS5mb3JFYWNoKGl0ZW0gPT4gewogICAgICAgIGlmICh0eXBlb2YgKHRoaXMgYXMgYW55KVtpdGVtXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgICAgKHRoaXMgYXMgYW55KVtpdGVtXSh2YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICh0aGlzIGFzIGFueSlbaXRlbV0gPSB2YWx1ZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgY29uc3QgaXRlbTogc3RyaW5nID0ga2V5LnRvU3RyaW5nKCk7CiAgICAgIGlmICh0eXBlb2YgKHRoaXMgYXMgYW55KVtpdGVtXSA9PT0gImZ1bmN0aW9uIikgewogICAgICAgIC8vICh0aGlzIGFzIGFueSlba2V5LnRvU3RyaW5nKCldKHZhbHVlKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyAodGhpcyBhcyBhbnkpW2tleS50b1N0cmluZygpXSA9IHZhbHVlOwogICAgICB9CiAgICB9CiAgfQogIC8vIOiuoeeul3ZhbOWcqG1heOS4reeahOWNoOavlOOAggogIHByaXZhdGUgdG9QZXJjZW50YWdlKHZhbDogYW55LCBtYXg6IGFueSkgewogICAgcmV0dXJuIHZhbCAvIChtYXggLyAxMDApOwogIH0KfQo="},{"version":3,"sources":["slider-conponent.vue"],"names":[],"mappings":";;;;;;;;;;;;;AAaA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"slider-conponent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"slider\" :data-value=\"val\" :progress=\"tweenedNumber\">\n    <div class=\"progress\" @click.stop=\"JoystickClick\">\n      <div class=\"go\" :style=\"{width:  `calc(${tweenedNumber}% - 5px)`}\"></div>\n    </div>\n    <div\n      class=\"Joystick\"\n      v-drag:tweenedNumber=\"setData\"\n      :style=\"{left: `calc(${tweenedNumber}% - 5px)`}\"\n    ></div>\n  </div>\n</template>\n<script lang=\"ts\">\nimport { Vue, Prop, Component, Emit, Watch } from \"vue-property-decorator\";\nimport { gsap } from \"gsap\";\n\nlet s = false;\n@Component({\n  directives: {\n    drag: {\n      inserted: function(el: HTMLElement, binding) {\n        const odiv: HTMLElement = el; //获取当前元素\n        let debounceTime: number | undefined;\n        let sendEmitValue: number | undefined;\n        let actualLeft = el.offsetLeft;\n        let current: any = el.offsetParent;\n\n        while (current !== null) {\n          actualLeft += current.offsetLeft;\n          current = current.offsetParent;\n        }\n        // 使用防抖是为了不过多的发送，节约资源： 发送@Emit\n        function sendEmit(x: any) {\n          if (sendEmitValue) clearTimeout(sendEmitValue);\n          sendEmitValue = setTimeout(() => {\n            binding.value(\"sliderChange\", x);\n          }, 60);\n        }\n\n        odiv.onmousedown = (de: MouseEvent) => {\n          s = true;\n          const screenX: number = de.clientX;\n          document.onmousemove = (me: MouseEvent) => {\n            if (!s) return;\n            //防抖\n            if (debounceTime) clearTimeout(debounceTime);\n            debounceTime = setTimeout(() => {\n              if (!s) return;\n              const mex = me.offsetX;\n              const pnw: any = el.parentNode;\n              const x =\n                (me.clientX - actualLeft - (de as any).layerX) /\n                (pnw.offsetWidth / 100);\n              // console.log(x)\n\n              if (x >= 100) {\n                binding.value(binding.arg, \"100\");\n                sendEmit(100);\n              } else if (x <= 0) {\n                binding.value(binding.arg, 0);\n                sendEmit(0);\n              } else {\n                binding.value(binding.arg, x);\n                sendEmit(x);\n              }\n            }, 5);\n          };\n        };\n        document.onmouseup = e => {\n          s = false;\n        };\n      }\n    }\n  }\n})\nexport default class Yslider extends Vue {\n  @Prop({\n    default: 0,\n    type: String || Number,\n    required: false\n  })\n  private go?: string | number;\n  mounted() {\n    if (this.go) {\n      if (this.go > 100) {\n        this.val = 100;\n      } else if (this.go < 0) {\n        this.val = 0;\n      } else {\n        this.val = this.go;\n      }\n    }\n  }\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  @Emit(\"sliderChange\") private sliderChange(number: number) {}\n  @Watch(\"val\")\n  private setVal(nv: any, ov: any) {\n    gsap.to(this.$data, { duration: 0.5, tweenedNumber: nv });\n    this.sliderChange(nv);\n  }\n\n  private val?: string | number = 0;\n  private MouseDiwn: boolean | undefined = false;\n  private tweenedNumber?: string | number = 0;\n  // private progress?: number | undefined = this.go;\n\n  private JoystickClick(event: MouseEvent) {\n    // const percentage = (event.target as any).offsetWidth / 100;\n    const x = event.offsetX;\n\n    this.val = this.toPercentage(x, (event.currentTarget as any).offsetWidth);\n  }\n  private getType(d: any) {\n    return Object.prototype.toString.call(d);\n  }\n  private setData(key: string[] | string, value: any) {\n    if (this.getType(key) === \"[object Array]\") {\n      (key as []).forEach(item => {\n        if (typeof (this as any)[item] === \"function\") {\n          (this as any)[item](value);\n        } else {\n          (this as any)[item] = value;\n        }\n      });\n    } else {\n      const item: string = key.toString();\n      if (typeof (this as any)[item] === \"function\") {\n        // (this as any)[key.toString()](value);\n      } else {\n        // (this as any)[key.toString()] = value;\n      }\n    }\n  }\n  // 计算val在max中的占比。\n  private toPercentage(val: any, max: any) {\n    return val / (max / 100);\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n@import \"../style.scss\";\n\n.slider {\n  width: 100%;\n  height: 10px;\n  box-sizing: border-box;\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  position: relative;\n\n  .progress {\n    border-radius: 6px;\n    background: $slider-background;\n    height: 6px;\n    width: 100%;\n    overflow: hidden;\n\n    .go {\n      width: 0px;\n      background: $slider-background-progress;\n      height: inherit;\n    }\n  }\n\n  .Joystick {\n    height: 10px;\n    width: 10px;\n    border-radius: 50%;\n    background: #1890ff;\n    left: 0px;\n    position: absolute;\n    cursor: pointer;\n    transition: height 0.2s, width 0.2s;\n    // transform: translateX(-50%);\n\n    &:hover {\n      height: 12px;\n      width: 12px;\n    }\n  }\n}\n</style>"]}]}